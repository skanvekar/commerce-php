"use strict";(self.webpackChunkcommerce_php=self.webpackChunkcommerce_php||[]).push([[80811],{50090:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return s},default:function(){return r}});var i=t(87462),a=t(63366),l=(t(15007),t(64983)),o=t(91515),p=["components"],s={},m={_frontmatter:s},d=o.Z;function r(e){var n=e.components,t=(0,a.Z)(e,p);return(0,l.mdx)(d,(0,i.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,l.mdx)("h1",{id:"add-code-inspections"},"Add code inspections"),(0,l.mdx)("p",null,"The IntelliJ Platform provides tools designed for static code analysis called code inspections, which help you maintain and clean up code without actually executing it.\nRead more in the ",(0,l.mdx)("a",{parentName:"p",href:"https://plugins.jetbrains.com/docs/intellij/code-inspections.html"},"official documentation"),"."),(0,l.mdx)("p",null,"you can find plugin inspections  in ",(0,l.mdx)("inlineCode",{parentName:"p"},"Settings | Preferences... | Editor | Inspections"),".\nUse a filter to find only the plugin inspections: ",(0,l.mdx)("inlineCode",{parentName:"p"},"Magento 2"),"."),(0,l.mdx)("p",null,(0,l.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,l.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"56.56250000000001%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,l.mdx)("picture",{parentName:"span"},"\n          ",(0,l.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/48f25e50ee28605691a779129f6767e5/5530d/Intellij-idea-plugin-editor-local-inspections.webp 320w","/commerce-php/static/48f25e50ee28605691a779129f6767e5/0c8fb/Intellij-idea-plugin-editor-local-inspections.webp 640w","/commerce-php/static/48f25e50ee28605691a779129f6767e5/94b1e/Intellij-idea-plugin-editor-local-inspections.webp 1280w","/commerce-php/static/48f25e50ee28605691a779129f6767e5/0b34d/Intellij-idea-plugin-editor-local-inspections.webp 1920w","/commerce-php/static/48f25e50ee28605691a779129f6767e5/d5269/Intellij-idea-plugin-editor-local-inspections.webp 2560w","/commerce-php/static/48f25e50ee28605691a779129f6767e5/8c51d/Intellij-idea-plugin-editor-local-inspections.webp 2580w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,l.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/48f25e50ee28605691a779129f6767e5/dd4a7/Intellij-idea-plugin-editor-local-inspections.png 320w","/commerce-php/static/48f25e50ee28605691a779129f6767e5/0f09e/Intellij-idea-plugin-editor-local-inspections.png 640w","/commerce-php/static/48f25e50ee28605691a779129f6767e5/bbbf7/Intellij-idea-plugin-editor-local-inspections.png 1280w","/commerce-php/static/48f25e50ee28605691a779129f6767e5/ac7a9/Intellij-idea-plugin-editor-local-inspections.png 1920w","/commerce-php/static/48f25e50ee28605691a779129f6767e5/c7a69/Intellij-idea-plugin-editor-local-inspections.png 2560w","/commerce-php/static/48f25e50ee28605691a779129f6767e5/36d84/Intellij-idea-plugin-editor-local-inspections.png 2580w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,l.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-php/static/48f25e50ee28605691a779129f6767e5/bbbf7/Intellij-idea-plugin-editor-local-inspections.png",alt:"Image of the Magento 2 Group Inspections",title:"Image of the Magento 2 Group Inspections",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,l.mdx)("p",null,"See ",(0,l.mdx)("a",{parentName:"p",href:"https://jetbrains.design/intellij/text/inspections/"},"Inspections topic")," in the IntelliJ Platform UI Guidelines\nfor naming, writing descriptions, and messages for inspections to avoid basic naming convention issues before code review."),(0,l.mdx)("h2",{id:"to-add-a-new-inspection"},"To add a new inspection"),(0,l.mdx)("p",null,"Adding a new code inspection includes:"),(0,l.mdx)("ol",null,(0,l.mdx)("li",{parentName:"ol"},"Declaring an inspection in the plugin configuration file"),(0,l.mdx)("li",{parentName:"ol"},"Implementing a local inspection class to inspect code in the IntelliJ Platform-based IDE editor"),(0,l.mdx)("li",{parentName:"ol"},"Creating a visitor to traverse the PSI tree of the file being edited and inspecting for problematic syntax"),(0,l.mdx)("li",{parentName:"ol"},"Writing an HTML description of the inspection for display in the inspection preferences panel"),(0,l.mdx)("li",{parentName:"ol"},"Create a unit test for the inspection"),(0,l.mdx)("li",{parentName:"ol"},"Implementing a quick fix class to correct syntax problems by altering the PSI tree as needed"),(0,l.mdx)("li",{parentName:"ol"},"Implementing an inspection preferences panel to display information about the inspection")),(0,l.mdx)("h2",{id:"declaring-an-inspection-in-the-plugin-configuration-file"},"Declaring an inspection in the plugin configuration file"),(0,l.mdx)("p",null,"You must declare all plugin inspections in the ",(0,l.mdx)("inlineCode",{parentName:"p"},'<extensions defaultExtensionNs="com.intellij">')," XML node of the plugin configuration file."),(0,l.mdx)("p",null,"For example, we will implement a local inspection tool for checking preference XML tag attributes (",(0,l.mdx)("inlineCode",{parentName:"p"},"di.xml")," file)\nif they are valid classes FQNs."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-xml"},'<localInspection language="XML" groupPath="XML"\n                 shortName="InvalidDiTypeInspection"\n                 bundle="magento2.inspection" key="inspection.displayName.InvalidDiTypeInspection"\n                 groupBundle="magento2.inspection" groupKey="inspection.group.name"\n                 enabledByDefault="true" level="WARNING"\n                 implementationClass="com.magento.idea.magento2plugin.inspections.xml.InvalidDependencyInjectionTypeInspection"/>\n')),(0,l.mdx)("p",null,"The ",(0,l.mdx)("inlineCode",{parentName:"p"},"<localInspection/>")," tag attributes:"),(0,l.mdx)("ol",null,(0,l.mdx)("li",{parentName:"ol"},(0,l.mdx)("inlineCode",{parentName:"li"},"language")," - desired file language (ex.: XML, PHP, CSS, JavaScript, etc.)"),(0,l.mdx)("li",{parentName:"ol"},(0,l.mdx)("inlineCode",{parentName:"li"},"groupPath")," - the first level group in the inspection preferences panel"),(0,l.mdx)("li",{parentName:"ol"},(0,l.mdx)("inlineCode",{parentName:"li"},"shortName")," - local inspection identity"),(0,l.mdx)("li",{parentName:"ol"},(0,l.mdx)("inlineCode",{parentName:"li"},"bundle")," - which bundle to use to display name in the inspection preferences panel, constant value: ",(0,l.mdx)("inlineCode",{parentName:"li"},"magento2.inspection")),(0,l.mdx)("li",{parentName:"ol"},(0,l.mdx)("inlineCode",{parentName:"li"},"key")," - which bundle message to use to display name in the inspection preferences panel"),(0,l.mdx)("li",{parentName:"ol"},(0,l.mdx)("inlineCode",{parentName:"li"},"groupBundle")," - the second level group bundle, constant value: ",(0,l.mdx)("inlineCode",{parentName:"li"},"magento2.inspection")),(0,l.mdx)("li",{parentName:"ol"},(0,l.mdx)("inlineCode",{parentName:"li"},"groupKey")," - group bundle message, constant value: ",(0,l.mdx)("inlineCode",{parentName:"li"},"inspection.group.name")),(0,l.mdx)("li",{parentName:"ol"},(0,l.mdx)("inlineCode",{parentName:"li"},"enabledByDefault")," - is it should be enabled by default"),(0,l.mdx)("li",{parentName:"ol"},(0,l.mdx)("inlineCode",{parentName:"li"},"level")," - inspection severity level"),(0,l.mdx)("li",{parentName:"ol"},(0,l.mdx)("inlineCode",{parentName:"li"},"ImplementationClass")," - inspection implementation class")),(0,l.mdx)("p",null,"Add a new bundle message with key ",(0,l.mdx)("inlineCode",{parentName:"p"},"inspection.displayName.InvalidDiTypeInspection")," to the ",(0,l.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2-phpstorm-plugin/blob/4.0.0-develop/resources/magento2/inspection.properties"},"InspectionBundleMessagesFile"),":"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-properties"},"inspection.displayName.InvalidDiTypeInspection=Invalid type configuration in the `etc/di.xml` file\n")),(0,l.mdx)("h2",{id:"implementing-a-local-inspection-class-to-inspect-code-in-the-intellij-platform-based-ide-editor"},"Implementing a local inspection class to inspect code in the IntelliJ Platform-based IDE editor"),(0,l.mdx)("p",null,"The base class for all local inspections is ",(0,l.mdx)("inlineCode",{parentName:"p"},"com.intellij.codeInspection.LocalInspectionTool"),"."),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Plugin extension points:")),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Language"),(0,l.mdx)("th",{parentName:"tr",align:null},"Example Implementation"),(0,l.mdx)("th",{parentName:"tr",align:null},"Extension Point Class"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"PHP")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("a",{parentName:"td",href:"https://github.com/magento/magento2-phpstorm-plugin/blob/4.0.0-develop/src/com/magento/idea/magento2plugin/inspections/php/PluginInspection.java"},"PluginInspection")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"com.jetbrains.php.lang.inspections.PhpInspection"))),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"XML")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("a",{parentName:"td",href:"https://github.com/magento/magento2-phpstorm-plugin/blob/4.0.0-develop/src/com/magento/idea/magento2plugin/inspections/xml/ModuleDeclarationInModuleXmlInspection.java"},"ModuleDeclarationInModuleXmlInspection")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"com.intellij.codeInspection.XmlSuppressableInspectionTool"))))),(0,l.mdx)("p",null,"Implement ",(0,l.mdx)("inlineCode",{parentName:"p"},"InvalidDependencyInjectionTypeInspection")," inspection that extends ",(0,l.mdx)("inlineCode",{parentName:"p"},"XmlSuppressableInspectionTool"),":"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"/*\n * Copyright Â© Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\npackage com.magento.idea.magento2plugin.inspections.xml;\n\nimport com.intellij.codeInspection.ProblemsHolder;\nimport com.intellij.codeInspection.XmlSuppressableInspectionTool;\nimport com.intellij.psi.PsiElementVisitor;\nimport org.jetbrains.annotations.NotNull;\n\npublic class InvalidDependencyInjectionTypeInspection extends XmlSuppressableInspectionTool {\n\n    @Override\n    public @NotNull PsiElementVisitor buildVisitor(\n            final @NotNull ProblemsHolder holder,\n            final boolean isOnTheFly\n    ) {\n        // TODO: Implement visitor for InvalidDependencyInjectionTypeInspection type.\n        return super.buildVisitor(holder, isOnTheFly);\n    }\n}\n")),(0,l.mdx)("h2",{id:"creating-a-visitor-to-traverse-the-psi-tree-of-the-file-being-edited-and-inspecting-for-problematic-syntax"},"Creating a visitor to traverse the PSI tree of the file being edited and inspecting for problematic syntax"),(0,l.mdx)("p",null,"All visitors should extend ",(0,l.mdx)("inlineCode",{parentName:"p"},"com.intellij.psi.PsiElementVisitor"),"."),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Visitors implementations for different languages:")),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Language"),(0,l.mdx)("th",{parentName:"tr",align:null},"Visitor Implementation Class"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"PHP")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"com.jetbrains.php.lang.psi.visitors.PhpElementVisitor"))),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"XML")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"com.intellij.psi.XmlElementVisitor"))),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"JSON")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"com.intellij.json.psi.JsonElementVisitor"))),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"JavaScript")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"com.intellij.psi.PsiElementVisitor"))))),(0,l.mdx)("p",null,"Let's implement new ",(0,l.mdx)("inlineCode",{parentName:"p"},"XmlElementVisitor")," that overrides ",(0,l.mdx)("inlineCode",{parentName:"p"},"visitXmlTag")," method. That visitor will check all XML tags\nin all XML files. We should dedicate it to check only expected XML files (",(0,l.mdx)("inlineCode",{parentName:"p"},"di.xml"),") and expected XML tags (",(0,l.mdx)("inlineCode",{parentName:"p"},"<type/>"),").\nUse the following code to check only expected XML files:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"final PsiFile file = xmlTag.getContainingFile();\n\nif (!file.getName().equals(ModuleDiXml.FILE_NAME)\n        || !xmlTag.getName().equals(ModuleDiXml.TYPE_TAG)) {\n    return;\n}\n")),(0,l.mdx)("p",null,"Now we can access the ",(0,l.mdx)("inlineCode",{parentName:"p"},"<type/>")," tag's ",(0,l.mdx)("inlineCode",{parentName:"p"},"name")," attribute to check its value:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"final XmlAttribute nameAttribute = xmlTag.getAttribute(ModuleDiXml.NAME_ATTR);\n")),(0,l.mdx)("p",null,"The ",(0,l.mdx)("inlineCode",{parentName:"p"},"XmlTag.getAttribute()")," method returns ",(0,l.mdx)("inlineCode",{parentName:"p"},"@Nullable")," value. We should check if our attribute is accessible for working with it.\nAlso, later we will need to use the ",(0,l.mdx)("inlineCode",{parentName:"p"},"XmlTag.getValueElement()")," method to register problems using ",(0,l.mdx)("inlineCode",{parentName:"p"},"ProblemsHolder")," if they occur.\nThe ",(0,l.mdx)("inlineCode",{parentName:"p"},"XmlTag.getValueElement()")," method also returns ",(0,l.mdx)("inlineCode",{parentName:"p"},"@Nullable")," value. Let's use this code to skip checking incorrect XML attributes:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},"if (nameAttribute == null || nameAttribute.getValue() == null || nameAttribute.getValueElement() == null) {\n    return;\n}\n")),(0,l.mdx)("p",null,"Now we can access attribute values. We can check if an attribute value is an existing class by using the ",(0,l.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2-phpstorm-plugin/blob/4.0.0-develop/src/com/magento/idea/magento2plugin/inspections/validator/PhpClassExistenceValidator.java"},"PhpClassExistenceValidator")," type instance.\nTo report problem with the ",(0,l.mdx)("inlineCode",{parentName:"p"},"name")," attribute value, you can use the following code:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},'problemsHolder.registerProblem(\n        nameAttribute.getValueElement(),\n        inspectionBundle.message(\n                "inspection.error.idAttributeCanNotBeEmpty",\n                nameAttribute.getName()\n        ),\n        ProblemHighlightType.ERROR\n);\n')),(0,l.mdx)("p",null,"You cannot access the tag value of the ",(0,l.mdx)("inlineCode",{parentName:"p"},"PsiElement")," type.\nYou should report problems with the tag element similar to Intellij Idea inspections. For example: ",(0,l.mdx)("inlineCode",{parentName:"p"},"com.intellij.xml.util.CheckEmptyTagInspection"),"."),(0,l.mdx)("p",null,"So, there is a full example: ",(0,l.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2-phpstorm-plugin/blob/4.0.0-develop/src/com/magento/idea/magento2plugin/inspections/xml/InvalidDependencyInjectionTypeInspection.java"},"InvalidDependencyInjectionTypeInspection")),(0,l.mdx)("h2",{id:"writing-html-descriptions"},"Writing HTML descriptions"),(0,l.mdx)("p",null,"This section shows you how to display an HTML description of the inspection in the inspection preferences panel."),(0,l.mdx)("p",null,"You must describe all inspections in the description file. To do this, you can add a new HTML file to the following path:\n",(0,l.mdx)("inlineCode",{parentName:"p"},"./resources/inspectionDescriptions/{shortName}.html"),", where ",(0,l.mdx)("inlineCode",{parentName:"p"},"{shortName}")," is a ",(0,l.mdx)("inlineCode",{parentName:"p"},"shortName")," attribute value in the\nlocal inspection declaration. Or you can just use Intellij Idea automation to do this (preferred).\nAll inspection implementation classes have highlighted class names if they don't have description files. Here's a quick fix to create it:\n",(0,l.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,l.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"23.125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,l.mdx)("picture",{parentName:"span"},"\n          ",(0,l.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/bdd86de6e506af1f4b7d3bbcfac0eafb/5530d/Intellij-idea-plugin-create-inspection-description-quick-fix.webp 320w","/commerce-php/static/bdd86de6e506af1f4b7d3bbcfac0eafb/0c8fb/Intellij-idea-plugin-create-inspection-description-quick-fix.webp 640w","/commerce-php/static/bdd86de6e506af1f4b7d3bbcfac0eafb/94b1e/Intellij-idea-plugin-create-inspection-description-quick-fix.webp 1280w","/commerce-php/static/bdd86de6e506af1f4b7d3bbcfac0eafb/6a898/Intellij-idea-plugin-create-inspection-description-quick-fix.webp 1542w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,l.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/bdd86de6e506af1f4b7d3bbcfac0eafb/dd4a7/Intellij-idea-plugin-create-inspection-description-quick-fix.png 320w","/commerce-php/static/bdd86de6e506af1f4b7d3bbcfac0eafb/0f09e/Intellij-idea-plugin-create-inspection-description-quick-fix.png 640w","/commerce-php/static/bdd86de6e506af1f4b7d3bbcfac0eafb/bbbf7/Intellij-idea-plugin-create-inspection-description-quick-fix.png 1280w","/commerce-php/static/bdd86de6e506af1f4b7d3bbcfac0eafb/46352/Intellij-idea-plugin-create-inspection-description-quick-fix.png 1542w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,l.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-php/static/bdd86de6e506af1f4b7d3bbcfac0eafb/bbbf7/Intellij-idea-plugin-create-inspection-description-quick-fix.png",alt:"Create Inspection Description File Quick Fix",title:"Create Inspection Description File Quick Fix",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,l.mdx)("p",null,"Use ",(0,l.mdx)("a",{parentName:"p",href:"https://jetbrains.design/intellij/text/inspections/"},"Inspections topic")," to write better descriptions for inspections using naming conventions."),(0,l.mdx)("h2",{id:"create-a-unit-test-for-the-inspection"},"Create a unit test for the inspection"),(0,l.mdx)("p",null,"You must deliver each inspection with the unit test for it. The root folder for all inspections unit tests is ",(0,l.mdx)("inlineCode",{parentName:"p"},"./tests/com/magento/idea/magento2plugin/inspections"),". As base classes for your tests you should use predefined implementations based on languages."),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"Base classes implementations for different languages:")),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Language"),(0,l.mdx)("th",{parentName:"tr",align:null},"Abstract Class"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"php")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"com.magento.idea.magento2plugin.inspections.php.InspectionPhpFixtureTestCase"))),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"xml")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"com.magento.idea.magento2plugin.inspections.xml.InspectionXmlFixtureTestCase"))),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"graphql")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"com.magento.idea.magento2plugin.inspections.graphqls.InspectionGraphqlsFixtureTestCase"))))),(0,l.mdx)("p",null,"If you cover new language area, please extend the ",(0,l.mdx)("inlineCode",{parentName:"p"},"com.magento.idea.magento2plugin.inspections.BaseInspectionsTestCase"),' class and add a new abstract class for that area.\nAll test class names should have the suffix "test" and all testing methods should have the prefix "test" and detailed description in the annotation.\nAlso, you should enable testing inspection in the ',(0,l.mdx)("inlineCode",{parentName:"p"},"setUp()")," method."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-java"},'public class TypeConfigurationTagTypesInspectionTest extends InspectionXmlFixtureTestCase {\n\n    @Override\n    public void setUp() throws Exception {\n        super.setUp();\n        myFixture.enableInspections(InvalidDependencyInjectionTypeInspection.class);\n    }\n\n    /**\n     * Test type doesn\'t exists highlighting: <type name="TestingType"/>.\n     */\n    public void testNameAttributeValueTypeDoesNotExists() {\n        // TODO: write a test.\n    }\n}\n')),(0,l.mdx)("p",null,"The root folder for your test data is: ",(0,l.mdx)("inlineCode",{parentName:"p"},"./testData/inspections"),". The internal folder structure is the same as for your test cases, accordingly to the testing file language.\nTo add data for your new test case use the next rule: create directory inside tested language folder that has the same name as your testing class ",(0,l.mdx)("strong",{parentName:"p"},"without suffix Test")," (for the example above it is folder with the name: ",(0,l.mdx)("inlineCode",{parentName:"p"},"TypeConfigurationTagTypesInspection"),").\nFor each testing method create folder in it that has a name the same as method name ",(0,l.mdx)("strong",{parentName:"p"},"without test prefix")," in the camel case format (for the example above it is folder with the name: ",(0,l.mdx)("inlineCode",{parentName:"p"},"nameAttributeValueTypeDoesNotExists")," inside the ",(0,l.mdx)("inlineCode",{parentName:"p"},"TypeConfigurationTagTypesInspection")," folder)."),(0,l.mdx)("p",null,"The sandbox for the tests is in the ",(0,l.mdx)("inlineCode",{parentName:"p"},"./testData/project/magento2")," folder."))}r.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-best-practices-phpstorm-add-code-inspections-md-31b5f539e1189ddbecbe.js.map